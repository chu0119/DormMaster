# 更新日志

所有本项目的重大变更都会记录在此。

## [Unreleased] - 未发布

### 计划功能
- 宿舍调宿申请流程
- 报修管理系统
- 宿舍公告发布
- 微信小程序接口
- 数据可视化大屏
- 智能分配算法
- 短信通知功能
- 邮件提醒功能

---

## [1.1.0] - 2026-01-05

### 新增功能

#### 批量分配学生选择器
- **双栏布局设计**：左侧可选学生，右侧已选列表
- **实时搜索**：支持学号、姓名、学院、专业搜索
- **学生卡片**：显示完整信息（姓名、学号、性别、学院、专业）
- **已选管理**：右侧列表可单独移除学生
- **容量检查**：实时计算剩余床位，超限警告
- **便捷操作**：全选、清空、点击整行选择

#### CSV 编码自动转换
- **自动检测**：支持 GBK、GB2312、UTF-8 编码
- **智能转换**：GBK/GB2312 自动转换为 UTF-8
- **错误处理**：详细的导入日志记录
- **兼容性**：支持 Windows 默认的 GBK CSV 文件

#### 日志系统
- **操作日志**：记录所有关键操作
- **错误日志**：记录系统异常
- **导入日志**：记录 CSV 导入详情
- **日志查看器**：在线查看、下载、清空日志

### 优化改进

#### 代码质量
- 修复变量插值错误（`{$variable}` 语法）
- 优化 SQL 查询性能
- 增强安全防护（CSRF、XSS、SQL注入）
- 改进错误处理机制

#### 用户体验
- 界面响应式设计优化
- 表单验证实时反馈
- 操作成功/失败提示
- 加载状态显示

### Bug 修复

- ✅ 修复 CSV 导入 GBK 编码错误
- ✅ 修复批量添加房间变量插值错误
- ✅ 修复学生导入日志变量错误
- ✅ 修复楼栋管理中 floor_count 未定义错误
- ✅ 修复配置文件损坏问题

---

## [1.0.0] - 2026-01-04

### 初始版本

#### 核心功能
- ✅ 多角色权限系统（管理员、教师、宿管、学生）
- ✅ 宿舍楼管理（添加、编辑、删除）
- ✅ 房间管理（批量添加、编辑、状态管理）
- ✅ 学生管理（添加、编辑、删除、批量导入）
- ✅ 宿舍分配（手动分配、批量分配）
- ✅ 数据统计（图表展示、实时计算）
- ✅ 用户管理（添加、编辑、密码重置）
- ✅ 安装向导（一键安装）

#### 技术特性
- PHP 7.4+ 支持
- MySQL 5.7+ 支持
- PDO 数据库操作
- CSRF 安全防护
- 密码加密存储
- 响应式 UI 设计
- ECharts 数据可视化

#### 界面设计
- 科技感配色（渐变紫色）
- 卡片式布局
- 平滑动画效果
- 移动端适配

---

## 版本说明

### 版本号规则
采用 `主版本.次版本.修订版本` 格式：
- **主版本**：重大功能更新或架构变更
- **次版本**：新增功能或重要改进
- **修订版本**：Bug 修复和小优化

### 更新策略
- 每月发布新版本
- 严重 Bug 及时修复
- 功能开发使用分支管理

### 向后兼容性
- 1.x 版本保持数据库结构兼容
- 配置文件格式保持稳定
- API 接口保持向后兼容

---

## 贡献指南

欢迎提交 Pull Request 或 Issue！

### 提交规范
```
feat: 新功能
fix: Bug 修复
docs: 文档更新
style: 代码格式调整
refactor: 代码重构
test: 测试相关
chore: 构建/工具相关
```

### 开发流程
1. Fork 本仓库
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 开启 Pull Request

---

**维护者**: 开发团队
**项目地址**: https://github.com/yourusername/dormitory-system
**文档**: https://github.com/yourusername/dormitory-system/wiki
